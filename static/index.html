<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LunaGuna - מעקב גונות במחזור החודשי</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #9C27B0;
            --border-radius: 8px;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .logo {
            width: 200px;
            height: auto;
            margin: 0 auto 2rem;
            display: block;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }

        .input-field {
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 200px;
            margin-bottom: 1rem;
        }

        .guna-card {
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
        }

        .guna-card.satva {
            background-color: #ffffff;
            color: #1a202c;
            border: 2px solid #e2e8f0;
        }

        .guna-card.rajas {
            background-color: #FED7D7;
            color: #742A2A;
            border: 2px solid #FC8181;
        }

        .guna-card.tamas {
            background-color: #2D3748;
            color: #ffffff;
            border: 2px solid #1A202C;
        }

        .calendar-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .calendar-button:hover {
            background-color: #7B1FA2;
        }

        .alert {
            background-color: #FFF3CD;
            border: 1px solid #FFEEBA;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-top: 1.5rem;
        }

        @media (max-width: 640px) {
            .container {
                padding: 1rem;
            }
            
            .tab-button {
                width: 100%;
                margin-bottom: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <svg class="logo" viewBox="0 0 200 100">
            <circle cx="50" cy="50" r="35" fill="#E1BEE7" stroke="#9C27B0" strokeWidth="2"/>
            <path d="M60 50 Q80 20 100 50 T140 50" 
                  fill="none" 
                  stroke="#9C27B0" 
                  strokeWidth="3" 
                  strokeLinecap="round"/>
            <g fill="#9C27B0">
                <circle cx="85" cy="30" r="2"/>
                <circle cx="120" cy="40" r="2"/>
                <circle cx="100" cy="25" r="2"/>
            </g>
            <text x="100" y="85" 
                  fontFamily="Arial" 
                  fontSize="24" 
                  fill="#9C27B0" 
                  fontWeight="bold"
                  textAnchor="middle">
                LunaGuna
            </text>
        </svg>

        <div class="tabs">
            <button onclick="setMode('daily')" class="tab-button" id="dailyTab">בדיקת גונה יומית</button>
            <button onclick="setMode('monthly')" class="tab-button" id="monthlyTab">תכנון חודשי</button>
        </div>

        <div id="dailyMode" class="mode-content">
            <h2>בדיקת גונה יומית</h2>
            <input type="number" min="1" max="28" placeholder="יום במחזור (1-28)" class="input-field" id="cycleDayInput">
            <div id="dailyResult"></div>
        </div>

        <div id="monthlyMode" class="mode-content" style="display: none;">
            <h2>תכנון חודשי</h2>
            <input type="date" class="input-field" id="startDateInput">
            <input type="number" value="28" min="21" max="35" class="input-field" id="cycleLengthInput" placeholder="אורך מחזור">
            <button onclick="calculateMonthly()" class="calendar-button">חשבי תחזית</button>
            <div id="monthlyResult"></div>
        </div>

        <div class="alert">
            <h3>הערה חשובה</h3>
            <p>המידע מבוסס על מחזור ממוצע. זכרי שכל אישה חווה את המחזור באופן שונה, 
               והתזמונים יכולים להשתנות. הקשיבי לגוף שלך והתאימי את הפעילויות בהתאם.</p>
        </div>
    </div>

    <script>
        const gunaDefinitions = {
            satva: {
                name: 'סאטווה (Satva)',
                description: 'ימי הווסת - התכנסות, רוחניות, חלימה, התמסרות והרפייה',
                recommendations: [
                    'זמן טוב למדיטציה והתבוננות פנימית',
                    'מנוחה והתחדשות',
                    'הימנעות ממאמץ פיזי מוגזם'
                ],
                daysRange: [1, 5],
                cssClass: 'satva'
            },
            rajas: {
                name: 'רג׳אס (Rajas)',
                description: 'ימי טרום הביוץ והביוץ - אנרגטיות, תקשורתיות, חשק מיני, תנועה',
                recommendations: [
                    'זמן מצוין לפגישות ואירועים חברתיים',
                    'מתאים לפעילות גופנית אינטנסיבית',
                    'תקופה טובה ליוזמות חדשות'
                ],
                daysRange: [6, 16],
                cssClass: 'rajas'
            },
            tamas: {
                name: 'טאמאס (Tamas)',
                description: 'ימי טרום הווסת - עייפות, כובד, רגישות בגוף ובנפש, האטה ועיכול',
                recommendations: [
                    'התמקדות במשימות שגרתיות ומוכרות',
                    'הקדשת זמן לארגון וסדר',
                    'הימנעות מקבלת החלטות משמעותיות'
                ],
                daysRange: [17, 28],
                cssClass: 'tamas'
            }
        };

        function setMode(mode) {
            document.getElementById('dailyMode').style.display = mode === 'daily' ? 'block' : 'none';
            document.getElementById('monthlyMode').style.display = mode === 'monthly' ? 'block' : 'none';
            document.getElementById('dailyTab').classList.toggle('active', mode === 'daily');
            document.getElementById('monthlyTab').classList.toggle('active', mode === 'monthly');
        }

        function getDayGuna(day) {
            const numDay = parseInt(day);
            for (const [type, guna] of Object.entries(gunaDefinitions)) {
                if (numDay >= guna.daysRange[0] && numDay <= guna.daysRange[1]) {
                    return { type, ...guna };
                }
            }
            return null;
        }

        document.getElementById('cycleDayInput').addEventListener('input', function(e) {
            const day = e.target.value;
            const resultDiv = document.getElementById('dailyResult');
            
            if (day >= 1 && day <= 28) {
                const guna = getDayGuna(day);
                if (guna) {
                    resultDiv.innerHTML = `
                        <div class="guna-card ${guna.cssClass}">
                            <h3>${guna.name}</h3>
                            <p>${guna.description}</p>
                            <div class="recommendations">
                                <strong>המלצות:</strong>
                                <ul>
                                    ${guna.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }
            } else {
                resultDiv.innerHTML = '';
            }
        });

        function formatDate(date) {
            return date.toLocaleDateString('he-IL');
        }

        function addToCalendar(guna, startDate, endDate) {
            const event = {
                title: `גונה: ${guna.name}`,
                description: `${guna.description}\n\nהמלצות:\n${guna.recommendations.join('\n')}`,
                startDate: startDate.toISOString().split('T')[0],
                endDate: endDate.toISOString().split('T')[0]
            };

            const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:${event.title}
DESCRIPTION:${event.description.replace(/\n/g, '\\n')}
DTSTART;VALUE=DATE:${event.startDate.replace(/-/g, '')}
DTEND;VALUE=DATE:${event.endDate.replace(/-/g, '')}
END:VEVENT
END:VCALENDAR`;

            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'luna-guna-event.ics';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function calculateMonthly() {
            const startDate = new Date(document.getElementById('startDateInput').value);
            const cycleLength = parseInt(document.getElementById('cycleLengthInput').value);
            const resultDiv = document.getElementById('monthlyResult');
            
            if (!startDate || isNaN(startDate)) {
                alert('נא להזין תאריך תחילת מחזור');
                return;
            }

            let html = '<div class="space-y-6">';
            
            for (const [type, guna] of Object.entries(gunaDefinitions)) {
                const phaseStart = new Date(startDate);
                phaseStart.setDate(startDate.getDate() + guna.daysRange[0] - 1);
                
                const phaseEnd = new Date(startDate);
                phaseEnd.setDate(startDate.getDate() + guna.daysRange[1] - 1);

                html += `
                    <div class="guna-card ${guna.cssClass}">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <h3>${guna.name}</h3>
                            <button onclick="addToCalendar(
                                ${JSON.stringify(guna)}, 
                                new Date('${phaseStart.toISOString()}'), 
                                new Date('${phaseEnd.toISOString()}')
                            )" class="calendar-button">
                                הוסיפי ליומן
                            </button>
                        </div>
                        <p class="dates">${formatDate(phaseStart)} - ${formatDate(phaseEnd)}</p>
                        <p>${guna.description}</p>
                        <div class="recommendations">
                            <strong>המלצות:</strong>
                            <ul>
                                ${guna.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            html += '</div>';
            resultDiv.innerHTML = html;
        }

        // Set initial mode
        setMode('daily');
    </script>
</body>
</html>
